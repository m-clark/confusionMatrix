<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Coefficients comparing classification agreement — calc_agreement • confusionMatrix</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  

<meta property="og:title" content="Coefficients comparing classification agreement — calc_agreement" />
<meta property="og:description" content="Computes several coefficients of agreement between the columns
  and rows of a 2-way contingency table. Most of the documentation for this
  function is copied directly from the matchClasses function
  documentation." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">confusionMatrix</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Demo.html">Demo</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/m-clark">
    <span class="fa fa-github-alt"></span>
     
  </a>
</li>
<li>
  <a href="https://m-clark.github.io">
    <span class="fa fa-empire"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Coefficients comparing classification agreement</h1>
    <small class="dont-index">Source: <a href='https://github.com/m-clark/confusionMatrix/blob/master/R/calc_agreement.R'><code>R/calc_agreement.R</code></a></small>
    <div class="hidden name"><code>calc_agreement.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Computes several coefficients of agreement between the columns
  and rows of a 2-way contingency table. Most of the documentation for this
  function is copied directly from the <code>matchClasses</code> function
  documentation.</p>
    </div>

    <pre class="usage"><span class='fu'>calc_agreement</span>(<span class='no'>tabble</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>tabble</th>
      <td><p>A 2-dimensional contingency table created with <code><a href='https://rdrr.io/r/base/table.html'>table</a></code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A tibble with:</p>
<dt>kappa</dt><dd><p><code>diag</code> corrected for agreement by chance.</p></dd>
<dt>crand</dt><dd><p>Rand index corrected for agreement by chance.</p></dd>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Suppose we want to compare two classifications summarized by the
  contingency table \(T=[t_{ij}]\) where \(i,j=1,\ldots,K\) and
  \(t_{ij}\) denotes the number of data points which are in class \(i\)
  in the first partition and in class \(j\) in the second partition. If
  both classifications use the same labels, then obviously the two
  classification agree completely if only elements in the main diagonal of
  the table are non-zero. On the other hand, large off-diagonal elements
  correspond to smaller agreement between the two classifications. If
  <code>match.names</code> is <code>TRUE</code>, the class labels as given by the row and
  column names are matched, i.e. only columns and rows with the same dimnames
  are used for the computation.</p>
<p>If the two classification do not use the same set of labels, or if
  identical labels can have different meaning (e.g., two outcomes of cluster
  analysis on the same data set), then the situation is a little  bit more
  complicated. Let \(A\) denote the number of all pairs of data  points
  which are either put into the same cluster by both partitions or put into
  different clusters by both partitions. Conversely, let \(D\)  denote the
  number of all pairs of data points that are put into one cluster in one
  partition, but into different clusters by the other partition.  Hence, the
  partitions disagree for all pairs \(D\) and agree for all pairs \(A\).
  We can measure the agreement by the Rand index \(A/(A+D)\) which is
  invariant with respect to permutations of the columns or rows of \(T\).</p>
<p>Both indices have to be corrected for agreement by chance if the sizes  of
  the classes are not uniform.</p>
<p>In addition, the Phi coefficient, Yule coefficient, Peirce's science of the
  method (sometimes called the Youden's J index, though it predates Youden by
  66 years), and Jaccard index are calculated.  The first two are based on
  the approach in the <code>psych</code> package.</p>
<p>This function is called by <code>confusion_matrix</code>, but if this is all you
  want, you can simply supply the table to this function.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Cohen. J. (1960) A coefficient of agreement for nominal scales. Educational
and Psychological Measurement.</p>
<p>Lawrence Hubert and Phipps Arabie (1985) Comparing partitions. Journal of
Classification.</p>
<p>Stuart G Baker &amp; Barnett S Kramer (2007) Peirce, Youden, and Receiver
Operating Characteristic Curves, The American Statistician.</p>
<p>Peirce, C. S. (1884) "The Numerical Measure of the Success of Predictions",
Science.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='https://rdrr.io/pkg/e1071/man/matchClasses.html'>matchClasses</a></code>, <code><a href='https://rdrr.io/pkg/psych/man/phi.html'>phi</a></code>,
  <code><a href='https://rdrr.io/pkg/psych/man/Yule.html'>Yule</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'> <span class='co'>## no class correlations: both kappa and crand almost zero</span>

 <span class='no'>g1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='fl'>1</span>:<span class='fl'>5</span>, <span class='kw'>size</span><span class='kw'>=</span><span class='fl'>1000</span>, <span class='kw'>replace</span><span class='kw'>=</span><span class='fl'>TRUE</span>)
 <span class='no'>g2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='fl'>1</span>:<span class='fl'>5</span>, <span class='kw'>size</span><span class='kw'>=</span><span class='fl'>1000</span>, <span class='kw'>replace</span><span class='kw'>=</span><span class='fl'>TRUE</span>)

 <span class='no'>tabble</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span>(<span class='no'>g1</span>, <span class='no'>g2</span>)

 <span class='fu'>calc_agreement</span>(<span class='no'>tabble</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: Some association metrics may not be</span>
#&gt; <span class='warning'>calculated due to lack of 2x2 table</span></div><div class='output co'>#&gt; <span style='color: #555555;'># A tibble: 1 x 6</span><span>
#&gt;     Kappa `Adjusted Rand` Yule  Phi   Peirce Jaccard
#&gt;     </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>           </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span>  
#&gt; </span><span style='color: #555555;'>1</span><span> 0.005</span><span style='text-decoration: underline;'>01</span><span>         0.002</span><span style='text-decoration: underline;'>36</span><span> </span><span style='color: #BB0000;'>NA</span><span>    </span><span style='color: #BB0000;'>NA</span><span>    </span><span style='color: #BB0000;'>NA</span><span>     </span><span style='color: #BB0000;'>NA</span><span>     </div><div class='input'>
 <span class='co'>## let pairs (g1=1,g2=1) and (g1=3,g2=3) agree better</span>

 <span class='no'>k</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='fl'>1</span>:<span class='fl'>1000</span>, <span class='kw'>size</span><span class='kw'>=</span><span class='fl'>200</span>)

 <span class='no'>g1</span>[<span class='no'>k</span>] <span class='kw'>&lt;-</span> <span class='fl'>1</span>
 <span class='no'>g2</span>[<span class='no'>k</span>] <span class='kw'>&lt;-</span> <span class='fl'>1</span>

 <span class='no'>k</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='fl'>1</span>:<span class='fl'>1000</span>, <span class='kw'>size</span><span class='kw'>=</span><span class='fl'>200</span>)

 <span class='no'>g1</span>[<span class='no'>k</span>] <span class='kw'>&lt;-</span> <span class='fl'>3</span>
 <span class='no'>g2</span>[<span class='no'>k</span>] <span class='kw'>&lt;-</span> <span class='fl'>3</span>

 <span class='no'>tabble</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span>(<span class='no'>g1</span>, <span class='no'>g2</span>)

 <span class='co'>## both kappa and crand should be significantly larger than before</span>

 <span class='fu'>calc_agreement</span>(<span class='no'>tabble</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: Some association metrics may not be</span>
#&gt; <span class='warning'>calculated due to lack of 2x2 table</span></div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 1 x 6</span><span>
#&gt;   Kappa `Adjusted Rand` Yule  Phi   Peirce Jaccard
#&gt;   </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>           </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span>  
#&gt; </span><span style='color: #555555;'>1</span><span> 0.331           0.227 </span><span style='color: #BB0000;'>NA</span><span>    </span><span style='color: #BB0000;'>NA</span><span>    </span><span style='color: #BB0000;'>NA</span><span>     </span><span style='color: #BB0000;'>NA</span><span>     </div><div class='input'>
</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#references">References</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>For Adjusted Rand code: Friedrich Leisch</p>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://m-clark.github.io'><img src="man/figures/mc_logo.png" width=10% style='display:inline'/></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


